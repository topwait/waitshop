(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["bundle-pages-luckly_wheel-luckly_wheel"],{"28ce":function(t,e,i){"use strict";i("c740"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=[0,1,2,5,8,7,6,3],n={data:function(){return{isFirstLoading:!0,showResult:!1,isLottery:!1,currentIndex:0,luckyOrder:-1,speed:200,activeIndex:-1,circleTimes:30,config:{},surplus:0,records:[],lotteryData:[],resultTips:""}},onShow:function(){this.getLotteryPrize()},methods:{getLotteryPrize:function(){var t=this;this.$u.api.apiLotteryPrize().then((function(e){0===e.code?(t.config=e.data.config,t.records=e.data.record,t.surplus=e.data.surplus,t.lotteryData=e.data.prize,t.$nextTick((function(){t.isFirstLoading=!1}))):t.$showToast("loading data exception")}))},onClose:function(){this.showResult=!1},start:function(t){var e=this;this.config.is_open||this.$showToast("抽奖活动已结束"),this.surplus<=0&&this.$showToast("今日次数已用完"),0!==t||this.isLottery||this.$u.api.apiLotteryDraw().then((function(t){if(0===t.code){var i=e.lotteryData.findIndex((function(e){return e.id==t.data.id}));switch(i){case 0:i=0;break;case 1:i=1;break;case 2:i=2;break;case 3:i=7;break;case 5:i=3;break;case 6:i=6;break;case 7:i=5;break;case 8:i=4;break;default:i=-1;break}e.resultTips=t.data.tips,e.luckyOrder=i,e.isLottery=!0,e.startLottery()}else e.$showToast(t.msg)}))},reset:function(){this.isLottery=!1,this.currentIndex=0,this.speed=100,this.luckyOrder=-1},stopCallback:function(t){this.surplus-=1,this.showResult=!0},startLottery:function(){var t=this,e=this.currentIndex,i=a[e%a.length],n=e%8;this.activeIndex=i,this.currentIndex=++e,e>this.circleTimes+8&&this.luckyOrder==n?(this.lotteryTimer&&clearTimeout(this.lotteryTimer),setTimeout((function(){t.stopCallback(a[t.luckyOrder]),setTimeout((function(){t.reset(),t.activeIndex=-1}),1500)}),500)):(e<this.circleTimes?this.speed-=10:e>this.circleTimes+8&&this.luckyOrder==n+1?this.speed+=80:this.speed+=20,this.speed<50&&(this.speed=50),this.lotteryTimer=setTimeout(this.startLottery.bind(this),this.speed))}}};e.default=n},"4a23":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return a}));var a={waitLoading:i("5198").default,uPopup:i("be9d").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"condition"},[i("v-uni-image",{staticClass:"background",attrs:{src:"/bundle/static/lottery/lottery_bg.png"}}),t.isFirstLoading?i("wait-loading"):t._e(),i("v-uni-view",{staticClass:"index-lottery-widget"},[i("v-uni-view",{staticClass:"u-flex u-row-right",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$toPage("/bundle/pages/luckly_record/luckly_record?login=true")}}},[i("v-uni-view",{staticClass:"whell-prize"},[t._v("我的奖品")])],1),i("v-uni-view",{staticClass:"wheel-container"},[i("v-uni-view",{staticClass:"wheel-notice"},[i("v-uni-image",{staticClass:"icon",attrs:{src:"/bundle/static/ic_notice.png"}}),i("v-uni-view",{staticClass:"message"},[i("v-uni-swiper",{staticStyle:{height:"33rpx"},attrs:{autoplay:!0,vertical:!0}},t._l(t.records,(function(e,a){return i("v-uni-swiper-item",{key:a,staticClass:"row"},[i("v-uni-text",{staticClass:"u-font-22 marquee_text",staticStyle:{color:"#F9EDDD"}},[t._v(t._s(e.tips))])],1)})),1)],1)],1),i("v-uni-view",{staticClass:"wheel-lottery"},t._l(t.lotteryData,(function(e,a){return i("v-uni-view",{key:a,class:"lottery-item "+(0==e.id?"draw":"")+(t.activeIndex==a?"active":""),on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.start(e.id)}}},[i("v-uni-image",{staticClass:"image",attrs:{src:e.image}}),0!=e.id?i("v-uni-view",{staticClass:"text"},[t._v(t._s(e.name))]):i("v-uni-view",{staticClass:"text"},[t._v("剩余"+t._s(t.surplus)+"次")])],1)})),1),i("v-uni-view",{staticClass:"wheel-rule"},[i("v-uni-view",{staticClass:"u-font-30",staticStyle:{color:"#FCD7D2","margin-bottom":"26rpx"}},[t._v("活动规则")]),i("v-uni-text",{staticClass:"u-font-sm",staticStyle:{color:"#FCD7D2"}},[t._v(t._s(t.config.rules))])],1)],1)],1),i("u-popup",{staticClass:"transparent",attrs:{mode:"center"},model:{value:t.showResult,callback:function(e){t.showResult=e},expression:"showResult"}},[i("v-uni-view",{staticClass:"win-result-popup"},[i("v-uni-view",{staticClass:"result-container"},[i("v-uni-view",{staticClass:"result-reward"},[i("v-uni-text",{staticStyle:{color:"#F95F2F","font-size":"62rpx","text-align":"center"}},[t._v(t._s(t.resultTips))])],1),i("v-uni-view",{staticClass:"result-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClose.apply(void 0,arguments)}}},[t._v("点击收下")])],1)],1)],1)],1)},r=[]},"691d":function(t,e,i){"use strict";i.r(e);var a=i("28ce"),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);e["default"]=n.a},"817b":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/* 颜色 */\r\n/* 边框 */\r\n/* 引入Uview */uni-page-body[data-v-5248fa87]{background-color:#ff2c3c}uni-page-body .background[data-v-5248fa87]{width:100%;height:%?1108?%;vertical-align:middle}.index-lottery-widget[data-v-5248fa87]{margin-top:-405px;position:relative}.index-lottery-widget .wheel-container[data-v-5248fa87]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0 %?15?%;margin-top:10px;border-radius:15px;padding:13px 7px 18px;border:6px solid #fe6847;background-color:#ed3720}.index-lottery-widget .wheel-notice[data-v-5248fa87]{display:flex;align-items:center;width:%?586?%;padding:%?13?% %?28?%;margin-bottom:%?20?%;border-radius:%?100?%;border:%?2?% solid #edb17d;background-color:#d30c16}.index-lottery-widget .wheel-notice .icon[data-v-5248fa87]{width:%?34?%;height:%?34?%}.index-lottery-widget .wheel-notice .message[data-v-5248fa87]{margin-left:%?20?%;width:%?500?%;height:%?33?%}.index-lottery-widget .wheel-rule[data-v-5248fa87]{width:%?640?%;margin-top:12px;padding:10px 8px 10px 14px;border-radius:10px;background-color:#d30c16}.win-result-popup[data-v-5248fa87]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:%?545?%;height:%?520?%}.win-result-popup .result-container[data-v-5248fa87]{display:flex;flex-direction:column;align-items:center;justify-content:space-between;width:%?545?%;height:%?514?%;background-size:100% 100%;background-image:url(/bundle/static/lottery/prize_bg.png)}.win-result-popup .result-reward[data-v-5248fa87]{display:flex;align-items:center;justify-content:center;padding:0 %?118?%;margin-top:%?90?%}.win-result-popup .result-btn[data-v-5248fa87]{display:flex;align-items:center;justify-content:center;margin-bottom:%?20?%;width:%?320?%;height:%?70?%;color:#7b3200;border-radius:30px;background:linear-gradient(180deg,#fef0b0,#ffa92e)}.whell-prize[data-v-5248fa87]{font-size:%?30?%;font-weight:700;color:#7d350c;padding:10px;box-shadow:0 3px 0 #f95f2f;border-radius:50px 0 0 50px;background-color:#fef0b5}.wheel-lottery[data-v-5248fa87]{display:flex;align-items:center;flex-wrap:wrap;justify-content:space-between;width:%?640?%;height:%?640?%;padding:%?35?% %?40?%;background-size:100% 100%;background-image:url(/bundle/static/lottery/lottery_light.png)}.wheel-lottery .lottery-item[data-v-5248fa87]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:%?180?%;height:%?180?%;background-size:100% 100%;background-image:url(/bundle/static/lottery/lottery_block.png)}.wheel-lottery .lottery-item.draw[data-v-5248fa87]{background-image:url(/bundle/static/lottery/lottery_button.png)}.wheel-lottery .lottery-item.active[data-v-5248fa87]{opacity:.7}.wheel-lottery .lottery-item .image[data-v-5248fa87]{width:%?80?%;height:%?80?%}.wheel-lottery .lottery-item .text[data-v-5248fa87]{font-weight:700;color:#743c3c;font-size:%?22?%;margin-top:%?20?%}body.?%PAGE?%[data-v-5248fa87]{background-color:#ff2c3c}',""]),t.exports=e},c2c6:function(t,e,i){"use strict";var a=i("e89f"),n=i.n(a);n.a},e89f:function(t,e,i){var a=i("817b");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("2bcfec90",a,!0,{sourceMap:!1,shadowMode:!1})},f402:function(t,e,i){"use strict";i.r(e);var a=i("4a23"),n=i("691d");for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);i("c2c6");var s,o=i("f0c5"),l=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"5248fa87",null,!1,a["a"],s);e["default"]=l.exports}}]);